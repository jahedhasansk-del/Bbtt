<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéØ WinGo 1M Live History</title>
<style>
  body { font-family: Arial; background: #f5f5f5; margin: 0; color: #222; }
  h2 { text-align: center; background: #ffd633; padding: 15px; margin: 0; }
  table { width: 100%; border-collapse: collapse; background: white; }
  th, td { padding: 10px; text-align: center; border-bottom: 1px solid #ddd; }
  th { background: #ffcc00; }
  tr:nth-child(even){ background: #f9f9f9; }
  .big { color: green; font-weight: bold; }
  .small { color: red; font-weight: bold; }
  .dot { width: 14px; height: 14px; border-radius: 50%; display: inline-block; }
  .red { background: red; }
  .green { background: green; }
  .violet { background: violet; }
  #last-update { text-align: center; margin: 10px 0; color: #555; font-size: 14px; }
</style>
</head>
<body>
  <h2>üéØ WinGo 1 Minute ‚Äî Latest 10 Results</h2>
  <div id="last-update">Loading...</div>
  <table>
    <thead>
      <tr>
        <th>Period</th>
        <th>Number</th>
        <th>Big/Small</th>
        <th>Color</th>
      </tr>
    </thead>
    <tbody id="tableBody"><tr><td colspan="4">Loading...</td></tr></tbody>
  </table>

<script>
async function loadData() {
  const ts = Date.now();
  const proxy = "https://api.allorigins.win/raw?url=";
  const api = `https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?ts=${ts}`;
  const url = proxy + encodeURIComponent(api);

  try {
    const res = await fetch(url);
    const json = await res.json();
    const list = json.data.list.slice(0, 10);
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";

    list.forEach(item => {
      const shortPeriod = item.issue.slice(-5);
      const colorClass = item.color.includes("violet") ? "violet" :
                         item.color.includes("green") ? "green" : "red";

      tbody.innerHTML += `
        <tr>
          <td>${shortPeriod}</td>
          <td style="font-weight:bold; color:${item.number >= 5 ? "green" : "red"};">${item.number}</td>
          <td class="${item.bigSmall.toLowerCase()}">${item.bigSmall}</td>
          <td><span class="dot ${colorClass}"></span></td>
        </tr>`;
    });

    document.getElementById("last-update").innerText =
      "Last updated: " + new Date().toLocaleTimeString();
  } catch (err) {
    console.error(err);
    document.getElementById("tableBody").innerHTML =
      `<tr><td colspan="4" style="color:red;">‚ö†Ô∏è Failed to load data</td></tr>`;
  }
}

function scheduleUpdate() {
  const now = new Date();
  const sec = now.getSeconds();
  const msUntilNext = ((60 - sec + 1) % 60) * 1000; // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ 01 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
  setTimeout(() => {
    loadData();
    setInterval(loadData, 61000);
  }, msUntilNext);
}

loadData();
scheduleUpdate();
</script>
</body>
</html>
