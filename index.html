<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>WIN GO 1M - AI PREDICTION</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

  *{margin:0;padding:0;box-sizing:border-box}
  body{
    font-family:'Orbitron',monospace;
    background:linear-gradient(135deg,#667eea,#764ba2,#f093fb);
    min-height:100vh;padding:20px;position:relative;overflow-x:hidden
  }
  body::before{
    content:'';position:fixed;top:0;left:0;width:100%;height:100%;
    background:radial-gradient(circle at 20% 50%,rgba(120,119,198,.3) 0%,transparent 50%),
               radial-gradient(circle at 80% 80%,rgba(255,135,135,.3) 0%,transparent 50%),
               radial-gradient(circle at 40% 20%,rgba(138,80,255,.3) 0%,transparent 50%);
    animation:gradient-shift 15s ease infinite;z-index:0
  }
  @keyframes gradient-shift{0%,100%{opacity:.5}50%{opacity:.8}}
  .container{position:relative;z-index:1;max-width:1400px;margin:auto}
  .prediction-panel{
    background:linear-gradient(135deg,rgba(255,0,0,.9),rgba(255,100,100,.8));
    border:3px solid #000;border-radius:15px;padding:30px;margin-bottom:20px;
    box-shadow:0 10px 40px rgba(0,0,0,.5);animation:glow-pulse 3s infinite
  }
  @keyframes glow-pulse{0%,100%{box-shadow:0 10px 40px rgba(255,0,0,.5)}50%{box-shadow:0 10px 60px rgba(255,0,0,.8)}}
  .prediction-header{text-align:center;margin-bottom:25px}
  .prediction-title{font-size:2em;font-weight:900;color:#fff;text-transform:uppercase;letter-spacing:3px;text-shadow:0 0 20px rgba(255,255,255,.8);animation:flicker 2s infinite}
  @keyframes flicker{0%,100%{opacity:1}50%{opacity:.8}}
  .prediction-subtitle{font-size:.9em;color:#ffeb3b;margin-top:10px;letter-spacing:2px}
  .prediction-display{display:flex;justify-content:center;align-items:center;gap:30px;flex-wrap:wrap}
  .prediction-box{background:rgba(0,0,0,.7);border:3px solid #ffeb3b;border-radius:10px;padding:20px 40px;min-width:200px;text-align:center;animation:bounce 2s infinite}
  @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
  .prediction-label{font-size:.8em;color:#ffeb3b;margin-bottom:10px;letter-spacing:2px}
  .prediction-value{font-size:3em;font-weight:900;color:#fff;text-shadow:0 0 30px #ffeb3b;animation:pulse-glow 1.5s infinite}
  @keyframes pulse-glow{0%,100%{text-shadow:0 0 20px #ffeb3b}50%{text-shadow:0 0 40px #ffeb3b,0 0 60px #ffeb3b}}
  .prediction-confidence{margin-top:15px;font-size:.9em;color:#4caf50;font-weight:bold}
  .status-bar{display:flex;justify-content:center;gap:15px;margin-bottom:20px;flex-wrap:wrap}
  .status-item{background:rgba(0,0,0,.7);border:2px solid #ffeb3b;border-radius:10px;padding:10px 20px;color:#fff;font-weight:bold}
  .status-online{color:#4caf50}.status-offline{color:#f44336}
  .history-section{background:rgba(0,0,0,.8);border:3px solid #000;border-radius:15px;padding:20px;box-shadow:0 10px 40px rgba(0,0,0,.5)}
  .history-header{background:linear-gradient(90deg,#ff0000,#ff6b6b);color:#fff;padding:15px;border-radius:10px 10px 0 0;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:10px;font-weight:900;font-size:1.1em;text-align:center}
  .history-row{background:linear-gradient(90deg,rgba(255,107,107,.3),rgba(255,159,107,.3));border-bottom:2px solid rgba(0,0,0,.3);padding:15px;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:10px;align-items:center;text-align:center;animation:slideIn .5s ease-out}
  @keyframes slideIn{from{opacity:0;transform:translateX(-50px)}to{opacity:1;transform:translateX(0)}}
  .cell{font-size:1.1em;color:#fff;font-weight:bold}.cell-number{font-size:1.5em;color:#ffeb3b;text-shadow:0 0 10px #ffeb3b}
  .result-win{color:#4caf50;font-weight:900;text-shadow:0 0 15px #4caf50;font-size:1.2em}
  .result-loss{color:#f44336;font-weight:900;text-shadow:0 0 15px #f44336;font-size:1.2em}
  .loading{text-align:center;padding:40px;color:#fff;font-size:1.2em}
  .spinner{width:50px;height:50px;border:4px solid rgba(255,255,255,.3);border-top:4px solid #fff;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px}
  @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
  .error-panel{background:rgba(50,0,0,.9);border:2px solid #ff0000;border-radius:10px;padding:20px;margin-bottom:20px;text-align:center}
  .error-text{color:#ff0000;font-size:1.1em;margin-bottom:15px}
  .retry-button{background:#4caf50;color:#fff;border:none;padding:12px 30px;font-family:'Orbitron',monospace;font-size:1em;font-weight:bold;cursor:pointer;border-radius:8px;transition:.3s}
  .retry-button:hover{background:#45a049;transform:scale(1.05)}
</style>
</head>
<body>
  <div class="container">
    <div class="prediction-panel">
      <div class="prediction-header">
        <div class="prediction-title">🎯 AI PREDICTION SYSTEM</div>
        <div class="prediction-subtitle">[ NEXT ROUND FORECAST ]</div>
      </div>
      <div class="prediction-display">
        <div class="prediction-box">
          <div class="prediction-label">PREDICTED</div>
          <div class="prediction-value" id="predictedValue">---</div>
          <div class="prediction-confidence" id="confidence">Analyzing...</div>
        </div>
      </div>
    </div>

    <div class="status-bar">
      <div class="status-item">Status: <span id="status">Loading...</span></div>
      <div class="status-item">Updates: <span id="updateCount">0</span></div>
      <div class="status-item">Next: <span id="countdown">--:--</span></div>
    </div>

    <div id="errorPanel"></div>

    <div class="history-section">
      <div class="history-header">
        <div>PERIOD</div><div>NUMBER</div><div>SIZE</div><div>RESULT</div>
      </div>
      <div id="historyGrid">
        <div class="loading"><div class="spinner"></div><div>LOADING HISTORY...</div></div>
      </div>
    </div>
  </div>

<script>
let updateCount = 0;
let countdownInterval = null;

// Pattern rules
const patternRules = {
  big: { counts: [1,3,4,5,7], prediction: 'SMALL' },
  small: { counts: [2,4,5,9], prediction: 'BIG' }
};

const numberPatterns = {
  small: [
    {prev:4,next:5},{prev:6,next:1},{prev:6,next:3},{prev:6,next:5},{prev:6,next:6},
    {prev:0,next:1},{prev:2,next:2},{prev:1,next:8},{prev:6,next:4},{prev:0,next:2},
    {prev:7,next:null},{prev:9,next:null}
  ],
  big: [
    {prev:1,next:4},{prev:4,next:2},{prev:4,next:3},{prev:4,next:4},{prev:4,next:7},
    {prev:0,next:0},{prev:1,next:2},{prev:6,next:9},{prev:1,next:5},{prev:7,next:3},
    {prev:3,next:null},{prev:4,next:null},{prev:1,next:null},{prev:8,next:null},{prev:6,next:null}
  ]
};

function analyzePattern(history){
  if(history.length<2) return null;
  let bigCount=0,smallCount=0;
  for(let i=0;i<Math.min(10,history.length);i++){
    const size=history[i].bigSmall.toLowerCase();
    if(size==='big'){bigCount++;smallCount=0;}
    else{smallCount++;bigCount=0;}
    if(patternRules.big.counts.includes(bigCount))return{prediction:'SMALL',confidence:`Pattern: ${bigCount} BIG in a row`};
    if(patternRules.small.counts.includes(smallCount))return{prediction:'BIG',confidence:`Pattern: ${smallCount} SMALL in a row`};
  }
  const lastNum=parseInt(history[0].number);
  const secondLastNum=history[1]?parseInt(history[1].number):null;
  for(const p of numberPatterns.small)if(p.prev===lastNum&&(p.next===null||p.next===secondLastNum))return{prediction:'SMALL',confidence:`Number Pattern: ${lastNum}→${secondLastNum??''}`};
  for(const p of numberPatterns.big)if(p.prev===lastNum&&(p.next===null||p.next===secondLastNum))return{prediction:'BIG',confidence:`Number Pattern: ${lastNum}→${secondLastNum??''}`};
  return{prediction:'WAIT',confidence:'No Clear Pattern Detected'};
}

function updatePrediction(history){
  const r=analyzePattern(history);
  if(r){
    document.getElementById('predictedValue').textContent=r.prediction;
    document.getElementById('confidence').textContent='✓ '+r.confidence;
  }else{
    document.getElementById('predictedValue').textContent='WAIT';
    document.getElementById('confidence').textContent='Insufficient Data';
  }
}

function checkResult(actual,predicted){
  if(!predicted||predicted==='WAIT')return'⏳ WAIT';
  return actual.toUpperCase()===predicted?'✓ WIN':'✗ LOSS';
}

function updateCountdown(){
  const now=new Date();
  const nextMinute=new Date(now);nextMinute.setMinutes(now.getMinutes()+1);nextMinute.setSeconds(2);nextMinute.setMilliseconds(0);
  const diff=nextMinute-now;const remain=Math.floor(diff/1000);
  const m=Math.floor(remain/60);const s=remain%60;
  return `${m}:${s.toString().padStart(2,'0')}`;
}

function startCountdown(){
  if(countdownInterval)clearInterval(countdownInterval);
  countdownInterval=setInterval(()=>{document.getElementById('countdown').textContent=updateCountdown();},1000);
}

async function fetchData(isRetry=false){
  try{
    updateCount++;
    document.getElementById('updateCount').textContent=updateCount;
    const ts=new Date().getTime();
    const url=`https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?ts=${ts}`;
    const res=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`);
    const json=await res.json();

    // ✅ নতুন ও সঠিক অর্ডারে ডাটা
    const list=json.data.list.filter(x=>x.bigSmall).slice(-10).reverse();
    updatePrediction(list);

    const grid=document.getElementById('historyGrid');
    grid.innerHTML='';
    list.forEach((item,index)=>{
      const row=document.createElement('div');
      row.className='history-row';
      const result=index>0?checkResult(item.bigSmall,document.getElementById('predictedValue').textContent):'---';
      const cls=result.includes('WIN')?'result-win':result.includes('LOSS')?'result-loss':'';
      row.innerHTML=`<div class="cell">${item.issue}</div><div class="cell cell-number">${item.number}</div><div class="cell">${item.bigSmall}</div><div class="cell ${cls}">${result}</div>`;
      grid.appendChild(row);
    });
    document.getElementById('status').textContent='● ONLINE';
    document.getElementById('status').className='status-online';
  }catch(e){
    console.error('Error:',e);
    document.getElementById('status').textContent='● OFFLINE';
    document.getElementById('status').className='status-offline';
  }
}

fetchData();
startCountdown();

function scheduleNextUpdate(){
  const now=new Date();
  const next=new Date(now.getFullYear(),now.getMonth(),now.getDate(),now.getHours(),now.getMinutes()+1,2,0);
  setTimeout(()=>{fetchData();scheduleNextUpdate();},next-now);
}
scheduleNextUpdate();

window.addEventListener('online',()=>fetchData(true));
window.addEventListener('offline',()=>{document.getElementById('status').textContent='● OFFLINE';document.getElementById('status').className='status-offline';});
</script>
</body>
</html>
