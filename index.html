<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinGo History Live</title>
<style>
  body {
    background: #0b0b0b;
    color: #00ffcc;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  h1 { color: #00ffcc; }
  table {
    margin: 10px auto;
    border-collapse: collapse;
    width: 90%;
  }
  th, td {
    border: 1px solid #444;
    padding: 8px;
    font-size: 14px;
  }
  th { background: #111; }
  tr:nth-child(even) { background: #1a1a1a; }
  tr:nth-child(odd) { background: #141414; }
  .win { color: #00ff66; font-weight: bold; }
  .loss { color: #ff3333; font-weight: bold; }
</style>
</head>
<body>

<h1>üéØ WinGo History Live</h1>

<p id="status">Loading data...</p>

<h3>üîπ Live Result</h3>
<table>
  <thead>
    <tr>
      <th>Period</th>
      <th>Number</th>
      <th>Big/Small</th>
      <th>Color</th>
      <th>Prediction</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody id="live"></tbody>
</table>

<h3>üìú History (Win/Loss)</h3>
<table>
  <thead>
    <tr>
      <th>Period</th>
      <th>Number</th>
      <th>Big/Small</th>
      <th>Prediction</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody id="history"></tbody>
</table>

<script>
const API_URL = "https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json";
let history = JSON.parse(localStorage.getItem("winGoHistory")) || [];

// üëâ ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶Æ‡¶§‡ßã Prediction ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶∏‡¶æ‡¶ì
let myPrediction = "Small";  // "Big" ‡¶¨‡¶æ "Small" ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã

async function loadHistory() {
  document.getElementById("status").innerText = "‚è≥ Updating...";
  try {
    const res = await fetch(API_URL + "?ts=" + Date.now());
    const json = await res.json();
    const list = json?.data?.list || [];

    let liveHtml = "";
    if (list.length > 0) {
      const latest = list[0]; // ‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶°‡ßá‡¶ü‡¶æ
      const { issue, number, bigSmall, color } = latest;

      // Win/Loss ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£
      const result = (myPrediction === bigSmall) ? "Win" : "Loss";

      // ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì
      liveHtml += `
        <tr>
          <td>${issue}</td>
          <td>${number}</td>
          <td>${bigSmall}</td>
          <td>${color}</td>
          <td>${myPrediction}</td>
          <td class="${result.toLowerCase()}">${result}</td>
        </tr>
      `;
      document.getElementById("live").innerHTML = liveHtml;

      // ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßã
      saveResult(issue, number, bigSmall, myPrediction, result);
    }
    document.getElementById("status").innerText = "‚úÖ Last update: " + new Date().toLocaleTimeString();
  } catch (err) {
    document.getElementById("status").innerText = "‚ùå Error loading data!";
    console.error(err);
  }
}

function saveResult(period, number, bigSmall, prediction, result) {
  // ‡¶°‡ßÅ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶ü ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶§‡¶¨‡ßá‡¶á ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßã
  if (!history.find(item => item.period === period)) {
    history.unshift({ period, number, bigSmall, prediction, result });
    history = history.slice(0, 50); // ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß´‡ß¶‡¶ü‡¶æ ‡¶∞‡¶æ‡¶ñ‡ßã
    localStorage.setItem("winGoHistory", JSON.stringify(history));
    updateHistoryTable();
  }
}

function updateHistoryTable() {
  const table = history.map(item => `
    <tr>
      <td>${item.period}</td>
      <td>${item.number}</td>
      <td>${item.bigSmall}</td>
      <td>${item.prediction}</td>
      <td class="${item.result.toLowerCase()}">${item.result}</td>
    </tr>
  `).join("");
  document.getElementById("history").innerHTML = table;
}

// ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßã
updateHistoryTable();
loadHistory();

// ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß¨‡ß® ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßã (‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡ß® ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°)
setInterval(loadHistory, 62000);
</script>
</body>
</html>
